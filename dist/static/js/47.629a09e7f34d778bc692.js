webpackJsonp([47],{aDIY:function(t,e){},mcDV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),o=n("FJ7W"),s=n("SGdj"),d=n("1XNc"),l=n("8wwu"),c={onChange:function(t,e){},onSelect:function(t,e,n){o.a.$emit("selectedRows",n)},onSelectAll:function(t,e,n){o.a.$emit("selectedRows",e)}},r=[{title:"门店编号",dataIndex:"id",width:100,align:"center"},{title:"门点名称",dataIndex:"companyname",width:200,ellipsis:!0,align:"center"},{title:"门店地址",dataIndex:"address",width:300,ellipsis:!0,align:"center"},{title:"联系人",dataIndex:"storeowner",width:150,align:"center"},{title:"老板电话",dataIndex:"bossmobilenumber",width:150,align:"center"},{title:"门店电话",dataIndex:"storephone",width:150,align:"center"},{title:"抽成比例",dataIndex:"spendpercent",align:"center"},{title:"门店状态",dataIndex:"storestatus",align:"center",width:100,scopedSlots:{customRender:"storestatus"}},{title:"操作",dataIndex:"showInfo",align:"center",scopedSlots:{customRender:"showInfo"},fixed:"right"}],u={components:{EditableCell:s.a,DistributionStoreInfo:d.default,DistributionAdd:l.default},data:function(){return{dataSource:[],columns:r,selectedRowKeys:[],pagination:{},loading:!1,storeInfoVisible:!1,id:null,changeVisible:!1,changeTarget:0,rowSelection:c}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},mounted:function(){var t=this;this.fetch(),o.a.$on("cleanSelectedRow",function(){t.selectedRowKeys=[]}),o.a.$on("mallChangeDone",function(){t.fetch()})},methods:{changeStatus:function(t,e){var n=this,a={storestatus:t,id:e.id};this.$put("/business/LantianStore",i()({},a)).then(function(){n.$message.success("切换成功")})},onStatusChange:function(t){},handleTableChange:function(t,e,n){var a=i()({},this.pagination);a.current=t.current,this.pagination=a,this.fetch(i()({pageSize:t.pageSize,pageNum:t.current,sortField:n.field,sortOrder:n.order},e))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0;var n=this.$db.get("USER_TOKEN"),a=this.$db.get("USER");"一级代理"==a.description||"一级代理"==a.roleName?this.$get("/business/LantianStore/getByPhone/"+a.username).then(function(a){if(a.data.data&&200==a.data.code)return t.$get("/business/LantianStore/MapAllByStoreid",i()({Authentication:n,pageSize:10,Parentid:a.data.data.id},e)).then(function(e){if(e.data.data){var n=i()({},t.pagination);n.total=e.data.data.total,t.dataSource=e.data.data.rows,t.pagination=n}})}):this.$get("/business/LantianStore/MapAll",i()({Authentication:n,pageSize:10},e)).then(function(e){var n=i()({},t.pagination);n.total=e.data.data.total,t.loading=!1,t.dataSource=e.data.data.rows,t.pagination=n}),this.loading=!1},showInfoModal:function(t){this.storeInfoVisible=!0,this.id=t.id},onClose:function(){this.storeInfoVisible=!1,this.changeVisible=!1},changeMallModal:function(t){this.changeTarget=t.id,this.changeVisible=!0}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-table",{attrs:{columns:t.columns,dataSource:t.dataSource,pagination:t.pagination,loading:t.loading,"row-selection":t.rowSelection},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"storestatus",fn:function(e,a){return n("span",{},[t._v("\n      "+t._s(0==e?"不营业":1==e?"关店":2==e?"休店":3==e?"开店":"异常")+"\n    ")])}},{key:"showInfo",fn:function(e,a){return n("span",{},[n("a",{on:{click:function(e){return t.showInfoModal(a)}}},[t._v("查看")]),t._v(" "),n("a-divider",{attrs:{type:"vertical"}}),t._v(" "),n("a",{on:{click:function(e){return t.changeMallModal(a)}}},[t._v("修改")])],1)}}])}),t._v(" "),n("distribution-store-info",{attrs:{infoVisible:t.storeInfoVisible,id:t.id},on:{close:t.onClose}}),t._v(" "),n("distribution-add",{attrs:{addVisible:t.changeVisible,id:t.changeTarget},on:{close:t.onClose}})],1)},staticRenderFns:[]},g=n("VU/8")(u,h,!1,function(t){n("aDIY")},null,null);e.default=g.exports}});