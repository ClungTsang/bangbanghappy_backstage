webpackJsonp([58],{FV7H:function(t,e){},V8ht:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),a=n.n(i),o=n("FJ7W"),r=[{title:"id",dataIndex:"id"},{title:"标题",dataIndex:"title",align:"center"},{title:"内容",dataIndex:"detail",align:"center"},{title:"是否显示",dataIndex:"isDelete",align:"center",scopedSlots:{customRender:"isDelete"}},{title:"创建时间",width:200,dataIndex:"createTime",align:"center"},{title:"更新时间",width:200,dataIndex:"updateTime",align:"center"},{title:"操作",width:200,dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],s={data:function(){return{columns:r,dataSource:[],changeVisible:!1,form:this.$form.createForm(this),question:null}},created:function(){this.getQuestion()},mounted:function(){var t=this;o.a.$on("addCompleted",function(){t.dataSource=[],t.getQuestion()})},methods:{onUpdateQuestion:function(t){this.changeVisible=!0,this.form.getFieldDecorator("title"),this.form.getFieldDecorator("detail"),this.form.setFieldsValue({title:t.title,detail:t.detail}),this.question=t},handleOk:function(){var t=this,e=this.form.getFieldsValue(),n=this.question.id;this.$post("/question/update",a()({},e,{id:n})).then(function(){t.changeVisible=!1,t.dataSource=[],t.getQuestion()})},onChange:function(t,e){var n=this,i={isDelete:t,id:e.id};this.$post("/question/update",a()({},i)).then(function(){n.$message.success("切换成功")})},handleCancel:function(){this.changeVisible=!1},getQuestion:function(){var t=this;this.$get("/question").then(function(e){t.dataSource=e.data.data})},confirmDelete:function(t){var e=this;this.$get("/question/delete",{id:t.id}).then(function(){var n=e.dataSource.filter(function(e){return e.id!==t.id});e.dataSource=n})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-table",{attrs:{columns:t.columns,"data-source":t.dataSource},scopedSlots:t._u([{key:"isDelete",fn:function(e,i){return n("span",{},[n("a-select",{staticStyle:{width:"80px"},attrs:{"default-value":0==e?"显示":"不显示"},on:{change:function(e){t.onChange(e,i)}}},[n("a-select-option",{attrs:{value:"0"}},[t._v(" 显示 ")]),t._v(" "),n("a-select-option",{attrs:{value:"1"}},[t._v(" 不显示 ")])],1)],1)}},{key:"action",fn:function(e,i){return n("span",{},[n("a-popconfirm",{attrs:{title:"确定删除该答疑","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.confirmDelete(i)}}},[n("a",[t._v("删除答疑")])]),t._v(" "),n("a-divider",{attrs:{type:"vertical"}}),t._v(" "),n("a",{on:{click:function(e){return t.onUpdateQuestion(i)}}},[t._v("修改答疑")])],1)}}])}),t._v(" "),n("a-modal",{attrs:{visible:t.changeVisible,title:"修改答疑"},on:{ok:t.handleOk,cancel:t.handleCancel}},[n("a-form",{attrs:{form:t.form}},[n("a-form-item",{attrs:{label:"问题标题"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}]})],1),t._v(" "),n("a-form-item",{attrs:{label:"问题解答"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["detail"],expression:"['detail']"}]})],1)],1)],1)],1)},staticRenderFns:[]},l=n("VU/8")(s,c,!1,function(t){n("FV7H")},null,null);e.default=l.exports}});