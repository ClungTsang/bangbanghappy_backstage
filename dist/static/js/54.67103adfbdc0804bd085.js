webpackJsonp([54],{gH75:function(e,n){},z8jc:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("Dd8w"),r=t.n(i),o=t("Gu7T"),c=t.n(o),a={components:{EditableCell:t("SGdj").a},created:function(){this.getAssistSort()},data:function(){return{innerCount:0,innerDataSource:[],columns:[{title:"分类名称",dataIndex:"service",width:130,align:"center",scopedSlots:{customRender:"service"}},{title:"服务费用",dataIndex:"cost",align:"center",width:100,scopedSlots:{customRender:"cost"}},{title:"建议服务时间",dataIndex:"suggestionTime",align:"center",width:130,scopedSlots:{customRender:"suggestionTime"}},{title:"操作",dataIndex:"operation",align:"center",width:130,scopedSlots:{customRender:"operation"}}]}},methods:{getAssistSort:function(){var e=this;this.innerDataSource=[],this.$get("aidServiceType").then(function(n){n.data.data.forEach(function(n){1==n.oncampus&&e.innerDataSource.push({key:n.id,service:n.service,cost:n.cost,suggestionTime:n.suggestionTime})})})},onCellChangeInner:function(e,n,t){var i=[].concat(c()(this.innerDataSource)),r=i.find(function(n){return n.key===e});r&&(r[n]=t,this.innerDataSource=i,this.onChangeInfo(e))},onDeleteInner:function(e){var n=this;this.$get("/aidServiceType/delete",{id:e}).then(function(){var t=[].concat(c()(n.innerDataSource));n.innerDataSource=t.filter(function(n){return n.key!==e})})},handleAddInner:function(){var e=this,n={service:"校内服务"+this.innerCount,cost:2,oncampus:1,suggestionTime:10};this.$post("/aidServiceType",r()({},n)).then(function(){return e.innerCount+=1,e.getAssistSort()})},onChangeInfo:function(e){var n=[].concat(c()(this.innerDataSource)).find(function(n){return n.key===e});this.$post("/aidServiceType/update",{id:n.key,service:n.service,cost:n.cost,suggestionTime:n.suggestionTime})}}},s={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("a-card",{attrs:{title:"校内分类",bordered:!1}},[t("a-button",{staticClass:"editable-add-btn",on:{click:e.handleAddInner}},[e._v("新增校内服务分类")]),e._v(" "),t("a-table",{attrs:{bordered:"","data-source":e.innerDataSource,columns:e.columns},scopedSlots:e._u([{key:"service",fn:function(n,i){return[t("editable-cell",{attrs:{text:n},on:{change:function(n){return e.onCellChangeInner(i.key,"service",n)}}})]}},{key:"cost",fn:function(n,i){return[t("editable-cell",{attrs:{text:n},on:{change:function(n){return e.onCellChangeInner(i.key,"cost",n)}}})]}},{key:"suggestionTime",fn:function(n,i){return[t("editable-cell",{attrs:{text:n},on:{change:function(n){return e.onCellChangeInner(i.key,"suggestionTime",n)}}})]}},{key:"operation",fn:function(n,i){return[e.innerDataSource.length?t("a-popconfirm",{attrs:{title:"确认删除?"},on:{confirm:function(){return e.onDeleteInner(i.key)}}},[t("a",{attrs:{href:"javascript:;"}},[e._v("删除该分类")])]):e._e()]}}])})],1)],1)},staticRenderFns:[]},u=t("VU/8")(a,s,!1,function(e){t("gH75")},null,null);n.default=u.exports}});