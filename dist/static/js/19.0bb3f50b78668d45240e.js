webpackJsonp([19,49],{X6XT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Gu7T"),i=n.n(a),o=[{title:"排序",dataIndex:"ordernum",key:"ordernum",align:"center",width:100},{title:"轮播图",align:"center",dataIndex:"banner",scopedSlots:{customRender:"banner"},width:400},{title:"创建时间",align:"center",dataIndex:"createtime",key:"createindex",width:300},{title:"修改时间",align:"center",dataIndex:"updatetime",key:"updatetime",width:300}],s={components:{BannerUploadModal:n("sG4V").default},data:function(){return{isModalShow:!1,dataSource:[],columns:o,selectedRowKeys:[],deleteVisible:!1}},created:function(){this.getBanner()},methods:{getBanner:function(){var e=this,t=this.$db.get("USER_TOKEN");this.$get("backend/carousel/all",{Authentication:t}).then(function(t){return e.setBanner(t.data.data)})},setBanner:function(e){var t=this;e.forEach(function(e){t.dataSource.push({key:e.id,ordernum:e.ordernum,banner:e.carouselimgurl,createtime:e.createtime,updatetime:e.updatetime})})},onUploadImage:function(e){var t=this.dataSource,n={key:e.id,ordernum:e.ordernum,banner:e.carouselimgurl,createtime:e.createtime,updatetime:e.updatetime};this.dataSource=[].concat(i()(t),[n])},onSelectChange:function(e){this.selectedRowKeys=e},onBatchDelete:function(){var e=this;this.selectedRowKeys.forEach(function(t){e.$delete("backend/carousel",{id:t}).then(function(){var n=[].concat(i()(e.dataSource));e.dataSource=n.filter(function(e){return e.key!==t})})}),this.selectedRowKeys=[],this.deleteVisible=!1,this.$message.success("删除成功")}}},r={render:function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("div",[a("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:["banner:add"],expression:"['banner:add']"}],attrs:{type:"primary",ghost:""},on:{click:function(){e.isModalShow=!0}}},[t._v("新增图片")]),t._v(" "),a("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:["banner:delete"],expression:"['banner:delete']"}],on:{click:function(){e.deleteVisible=!0}}},[t._v("多选删除")]),t._v(" "),a("a-modal",{attrs:{title:"提示",visible:t.deleteVisible},on:{ok:t.onBatchDelete,cancel:function(){e.deleteVisible=!1}}},[a("p",[t._v("确定删除选中轮播图吗?此操作不可逆")])]),t._v(" "),a("a-table",{attrs:{columns:t.columns,"data-source":t.dataSource,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},scroll:{x:1e3}},scopedSlots:t._u([{key:"banner",fn:function(e,t){return a("span",{},[a("img",{staticStyle:{width:"300px",heigth:"auto"},attrs:{src:t.banner}})])}}])}),t._v(" "),a("banner-upload-modal",{attrs:{isVisible:t.isModalShow},on:{changeIsVisible:function(){e.isModalShow=!1},uploadImage:t.onUploadImage}})],1)},staticRenderFns:[]},c=n("VU/8")(s,r,!1,null,null,null);t.default=c.exports},dKSG:function(e,t){},sG4V:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{confirmLoading:!1}},components:{BannerUploadImage:n("DWW6").default},props:{isVisible:{type:Boolean,default:!1}},computed:{judge:function(){return this.isVisible}},methods:{cancelToUpload:function(){this.$emit("changeIsVisible")},confirmToUpload:function(){this.$refs.UploadImage.afterUpload(),this.$message.success("添加成功"),this.$emit("changeIsVisible")},changeNum:function(e){this.$refs.UploadImage.changeNum(e)},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{title:"填写相关内容","confirm-loading":e.confirmLoading},on:{ok:e.confirmToUpload,cancel:e.cancelToUpload},model:{value:e.judge,callback:function(t){e.judge=t},expression:"judge"}},[n("banner-upload-image",e._g({ref:"UploadImage"},e.$listeners),[e._v("上传图片")])],1)],1)},staticRenderFns:[]},o=n("VU/8")(a,i,!1,function(e){n("dKSG")},null,null);t.default=o.exports}});